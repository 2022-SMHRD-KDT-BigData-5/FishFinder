<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.smhrd.mapper.userhistoryMapper">
    
    
    <!-- 카카오 회원정보 가져오기 -->
    <select id="userhistory" resultType="com.smhrd.domain.userhistory"
        parameterType="com.smhrd.domain.userhistory">
        select * from user_history where user_num=#{user_num}
    </select>
    
    <!-- 카카오 회원가입 -->
    <insert id="historyInsert" parameterType="com.smhrd.domain.userhistory">
        insert into user_history(user_num,fish_img,search_date) values(#{user_num},#{fish_img},now())
    </insert>

    <!-- 마지막으로 성공한 insert의 auto cream~~값을 불러옴 -->
    <select id="last_insert_id" resultType="Integer">
        select last_insert_id()
    </select>

    <!-- pk로 이미지 가져오기 -->
    <select id="historyPk" resultType="com.smhrd.domain.userhistory">
        select * from user_history where his_seq=#{his_seq}
    </select>

    
    
    
</mapper>